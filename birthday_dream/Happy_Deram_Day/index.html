<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Welcome ‡∏î‡∏£‡∏µ‡∏° üíñ</title>
  <link rel="stylesheet" href="style/heart.css" />
  <style>
    body {
      background: #ffd1dc;
      font-family: 'Kanit', sans-serif;
      color: #a83279;
      margin: 0;
      padding: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
    }
    .container {
      background: #fff0f6;
      border-radius: 25px;
      padding: 30px 40px;
      max-width: 400px;
      box-shadow: 0 10px 25px rgba(168, 101, 131, 0.3);
    }
    h1 {
      margin-bottom: 20px;
      color: #d85c9f;
    }
    button {
      background: #ffb6c1;
      border: none;
      border-radius: 15px;
      padding: 12px 24px;
      margin: 10px 10px 20px 10px;
      color: #6a1b4d;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #ff89a1;
    }
    input[type="text"] {
      width: 80%;
      padding: 10px;
      border-radius: 12px;
      border: 2px solid #ffa6c0;
      margin: 10px 0 20px 0;
      font-size: 16px;
      outline: none;
      color: #a83279;
    }
    .error {
      color: #d0003a;
      font-weight: bold;
      margin-bottom: 20px;
    }
    img.gif {
      width: 180px;
      margin: 15px auto;
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="question-title">‡∏î‡∏£‡∏µ‡∏°‡∏£‡∏±‡∏Å‡∏û‡∏µ‡πà‡πÑ‡∏´‡∏°? ü•∫</h1>
    <div id="input-area"></div>
    <div id="error-msg" class="error"></div>
  </div>

  <audio id="clickSound" src="audio/mouse-click.mp3" preload="auto"></audio>

  <script>
    const questions = [
      {
        type: "button",
        id: "love",
        question: "‡∏î‡∏£‡∏µ‡∏°‡∏£‡∏±‡∏Å‡∏û‡∏µ‡πà‡πÑ‡∏´‡∏°? ü•∫",
        options: ["‡∏£‡∏±‡∏Å‡∏Å‡∏Å‡∏Å", "‡πÑ‡∏°‡πà‡∏≠‡πà‡∏∞üôÑ"],
        correct: "‡∏£‡∏±‡∏Å‡∏Å‡∏Å‡∏Å",
        successGif: "https://media.giphy.com/media/111ebonMs90YLu/giphy.gif",
      },
      {
        type: "text",
        id: "birthday-date",
        question: "‡∏î‡∏£‡∏µ‡∏°‡πÄ‡∏Å‡∏¥‡∏î‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà? üéÇ (‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö: ‡∏ß‡∏±‡∏ô/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡πÄ‡∏ä‡πà‡∏ô 32/10)",
        correct: "30/07",
      },
      {
        type: "text",
        id: "birthday-day",
        question: "‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏î‡∏£‡∏µ‡∏°‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢? üìÖ (‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå)",
        correct: "‡∏ß‡∏±‡∏ô‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ",
      },
      {
        type: "text",
        id: "birthday-age",
        question: "‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏î‡∏£‡∏µ‡∏°‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà? üë∂",
        correct: "16",
      },
      {
        type: "button",
        id: "hug",
        question: "‡∏≠‡∏¢‡∏≤‡∏Å‡∏Å‡∏≠‡∏î‡∏û‡∏µ‡πà‡πÑ‡∏´‡∏°‡∏°‡∏° üß∏",
        options: ["‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡∏∏‡∏î‡πÜ", "‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏≤‡∏Å ‡πÄ‡∏´‡∏°‡πá‡∏ô"],
        correct: "‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡∏∏‡∏î‡πÜ",
        successGif: "https://media.giphy.com/media/111ebonMs90YLu/giphy.gif",
      }
    ];

    let currentIndex = 0;
    let retryCount = {};
    const container = document.querySelector('.container');
    const questionTitle = document.getElementById('question-title');
    const inputArea = document.getElementById('input-area');
    const errorMsg = document.getElementById('error-msg');
    const clickSound = document.getElementById('clickSound');

    function showQuestion() {
      errorMsg.textContent = "";
      inputArea.innerHTML = "";
      const q = questions[currentIndex];
      questionTitle.textContent = q.question;

      if (q.type === "button") {
        q.options.forEach(option => {
          const btn = document.createElement("button");
          btn.textContent = option;
          btn.onclick = () => {
            clickSound.play();
            checkAnswer(option);
          };
          inputArea.appendChild(btn);
        });
      } else if (q.type === "text") {
        const input = document.createElement("input");
        input.type = "text";
        input.placeholder = "‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà";
        inputArea.appendChild(input);

        const btnSubmit = document.createElement("button");
        btnSubmit.textContent = "‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö";
        btnSubmit.onclick = () => {
          clickSound.play();
          checkAnswer(input.value.trim());
        };
        inputArea.appendChild(btnSubmit);
      }
    }

    function customLogic(questionId, answer) {
      retryCount[questionId] = retryCount[questionId] || 0;
      retryCount[questionId]++;

      if (questionId === "love" && answer !== "‡∏£‡∏±‡∏Å‡∏Å‡∏Å‡∏Å") {
        errorMsg.textContent = retryCount[questionId] === 1 ? "‡∏´‡πâ‡∏∞ ‡∏Ç‡∏≠‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö üò¢" : "‡∏≠‡∏¢‡∏≤‡∏Å‡πÇ‡∏î‡∏ô‡∏ó‡∏∏‡∏ö‡∏´‡∏£‡∏≠‡∏≠‡∏≠ üí¢";
        return false;
      }

      if (questionId === "hug" && answer !== "‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡∏∏‡∏î‡πÜ") {
        errorMsg.textContent = retryCount[questionId] === 1 ? "‡∏û‡∏µ‡πà‡∏≠‡∏≤‡∏ö‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡πâ‡∏ß ‡∏ñ‡∏π‡∏™‡∏ö‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏¢ üßº" : "‡∏≠‡πã‡∏≠ ‡∏Å‡πá‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡πÄ‡∏´‡∏≠‡∏∞ ü•≤";
        return false;
      }

      return true;
    }

    function checkAnswer(answer) {
      const q = questions[currentIndex];
      if (q.type === "button" && !customLogic(q.id, answer)) return;

      if (answer.toLowerCase() === q.correct.toLowerCase()) {
        errorMsg.textContent = "";
        inputArea.innerHTML = "";

        if (q.successGif) {
          const img = document.createElement("img");
          img.src = q.successGif;
          img.className = "gif";
          inputArea.appendChild(img);
        }

        // üíñ ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏≠‡∏¢‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠
        showFloatingHeart(window.innerWidth / 2, window.innerHeight / 2);

        setTimeout(() => {
          currentIndex++;
          if (currentIndex < questions.length) {
            showQuestion();
          } else {
            window.location.href = "birthday.html"; // ‡πÑ‡∏õ‡πÄ‡∏õ‡πà‡∏≤‡πÄ‡∏Ñ‡πâ‡∏Å
          }
        }, 1600);
      } else {
        errorMsg.textContent = "‡∏≠‡∏∞‡πÑ‡∏£ ‡∏ï‡∏≠‡∏ö‡∏Å‡πá‡∏ú‡∏¥‡∏î ‡πÑ‡∏õ‡∏ï‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏•‡∏¢‡πÑ‡∏≠‡πà‡∏≠‡πâ‡∏ß‡∏°üòï";
      }
    }

    function showFloatingHeart(x, y) {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.style.left = x + 'px';
      heart.style.top = y + 'px';
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 1500);
    }

    showQuestion();
  </script>
</body>
</html>